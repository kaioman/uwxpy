# プロンプト用 JSON ファイル仕様書

`tests/prompt/` ディレクトリに含まれる各JSONファイルは、AI画像生成やテキスト生成（プロンプト生成・画像解析用プロンプト）におけるパラメータ、キャラクター設定、およびプロンプトの構成要素を管理・定義しています。

## 1. analysis_prompt_templates.json

画像解析やキャラクターのツイート生成に用いるプロンプトのテンプレートを定義するファイルです。

- **構造**: キー（例: `tweet_analysis_v1`）に対して、文字列の配列（プロンプトの各行）を持っています。
- **用途**: AI（LLM）に対して画像解析とツイート生成を指示する際のシステムプロンプトとして機能します。
- **プレースホルダー**: `{name}`, `{gender}`, `{personality}`, `{labor_shift}` など、`personas.json` で定義されているキャラクター属性を実行時に動的に埋め込むための変数が含まれています。

## 2. personas.json

テキスト生成時に振る舞うAIキャラクター（ペルソナ）の詳細な設定を定義するファイルです。

- **構造**: 各キャラクターのID（例: `default_android_girl`, `cyber_rebel_philosophy`）をキーとして、以下の情報を含みます。
  - `name`: キャラクター名
  - `source_image`: キャラクターのベースとなる画像パス
  - `traits`: 性格、思想、趣味、性別、年齢、自己像などの基本属性
  - `viewpoint`: 特定の社会的トピック（労働市場、AIの普及など）に対する独自の視点や意見
  - `core_logic`: 出力時の思考プロセスや発言のロジック、比喩の使い方などの行動原理
  - `tone`: 話し方やトーンの指定
  - `context`: キャラクターの置かれている背景状況や目的

## 3. modes.json

画像生成における「モード（全体的な雰囲気や方向性）」を定義し、それぞれがどのプロンプトカテゴリの単語群を使用するかを紐づけるマッピングファイルです。

- **構造**: `modes` オブジェクト内に各モード（例: `chill`, `action`）が定義されています。
  - `display_name`: モードの表示名（例: "静・柔・日常（チル）"）
  - `mapping`: `words_data.json` 内のどのサブカテゴリを使用するかを指定する辞書。
    - 例: `chill` モードの場合、`quality` には `quality_soft` を、`outfit` には `casual_daily` を使用するように指定しています。

## 4. words_data.json

画像生成プロンプトを構成するためのプロンプト単語（タグ）の辞書データです。`modes.json` のマッピングやランダム選択によって、ここから単語が抽出されます。

- **構造**: プロンプトの要素となる大カテゴリごとに、詳細なサブカテゴリ（タグの配列）を持っています。
  - `categories` (品質・画質タグ: `quality_sharp`, `quality_soft` など)
  - `subject_compositions` (構図・人数指定)
  - `hairstyle` (髪型)
  - `outfit` (服装)
  - `pose_and_angle` (ポーズとカメラアングル)
  - `expression` (表情)
  - `location` (背景・ロケーション)
  - `effects` (エフェクト・ライティング)
  - `fixed_elements`: モードに関わらず常に付与される固定タグ（アニメスタイル、安全性指定など）

## 5. style_anchor.json

特定の画風や線のタッチを強調・固定するためのベースプロンプト群（アンカー）を定義するファイルです。

- **構造**: 画風やスタイルの識別子（例: `line_base`, `style_mikimoto_80s`）をキーとし、具体的なプロンプトタグの配列を持っています。
- **用途**: 画像全体のクオリティやタッチ（細い線の表現、80年代セルルックなど）を決定づけるために使用され、生成時のプロンプトのベースとして組み込まれます。
